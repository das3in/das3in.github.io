---
import "../styles/global.css";

export interface Props {
    title: string;
    description?: string;
    url?: string;
}

const { title, description, url } = Astro.props;

const GA_MEASUREMENT_ID = "G-N16TM08JV2";
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!-- Primary Meta Tags -->
        <title>{title}</title>
        <meta name="description" content={description} />
        <link rel="canonical" href={url} />

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="article" />
        <meta property="og:title" content={title} />
        <meta property="og:description" content={description} />
        <meta property="og:url" content={url} />

        <!-- Twitter -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content={title} />
        <meta name="twitter:description" content={description} />

        <!-- Google Analytics -->
        <script
            async
            src={`https://www.googletagmanager.com/gtag/js?id=G-N16TM08JV2`}
        ></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());
            gtag("config", "G-N16TM08JV2");
        </script>
    </head>
    <body>
        <main class="container">
            <header class="header">
                <a href="/" class="site-title-link">
                    <h1 class="site-title">thoughts and feelings</h1>
                </a>
                <button class="theme-toggle" aria-label="Toggle theme">
                    <div class="theme-toggle-container">
                        <div class="theme-rotator">
                            <svg
                                class="sun-icon"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-6.364-.386 1.591-1.591M3 12h2.25m.386-6.364 1.591-1.591M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"
                                ></path>
                            </svg>
                            <svg
                                class="moon-icon"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"
                                ></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </header>
            <slot />
        </main>
        <script>
            function initTheme() {
                const themeToggle = document.querySelector(".theme-toggle");
                const html = document.documentElement;

                // Check for saved theme preference or default to 'light'
                const savedTheme = localStorage.getItem("theme") || "light";
                html.classList.toggle("dark", savedTheme === "dark");

                themeToggle?.addEventListener("click", () => {
                    const isDark = html.classList.toggle("dark");
                    localStorage.setItem("theme", isDark ? "dark" : "light");
                });
            }

            initTheme();
        </script>
    </body>
</html>
